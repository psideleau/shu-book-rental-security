from flask import Flask, request, jsonify, render_template
app = Flask(__name__)


@app.route("/reset")
def reset():
    return render_template('reset.html')

@app.route('/reset', methods=['POST'])
def reset_password_with_Email(Email):
    if current_user.is_authenticated():
        flash('You are already logged in.')
        return redirect(index_url_for_blueprint(current_user))
    user = User.query.filter_by(reset_Email= Email).first()
    if user is None:
        return abort(Error)
    form = ResetPasswordForm()
    if form.validate_on_submit():
        user.set_password(form.new_password.data)
        flash('Your password was successfully changed.')
        login_user(user)
        user.reset_Email = None
        return redirect(index_url_for_blueprint(current_user))        
    return render_template('main/reset_password.html', form=form)

if __name__ == "__main__":
    app.run()

